function NormalizeBox(e,t,i){var r={...e};return r.height_normalized=r.height/r.source_height,r.width_normalized=r.width/r.source_width,r.y_normalized=r.y/r.source_height,r.x_normalized=r.x/r.source_width,r.height=r.height_normalized*i,r.width=r.width_normalized*t,r.scale=1,r.y=r.y_normalized*i*1,r.x=r.x_normalized*t*1,r.screenHeight=1*i,r.screenWidth=1*t,r}var colors={primary_color:"#2fa7d7",secondary_color:"#94e0ff",opacity_color:"rgba(47, 167, 215, 0.2)",blank_color:"#000000"};function DrawEyePopReticle(e){var t=document.getElementById("maincanvas"),i=t.getContext("2d"),r=NormalizeBox(e,t.width,t.height);console.log(e),console.log(t.width,t.height),console.log(r);var o=Math.min(r.height,r.width),n=Math.max(15,o/5.33333),l=r.x,s=r.y,a=r.width,c=r.height,d=0;t.dataset.xPos&&(d=t.dataset.xPos),t.dataset.yPos&&(d=t.dataset.yPos),console.log(d,0,"Canvas Origin"),l+=d,s+=0,i.beginPath(),i.rect(l,s,a,c),i.lineWidth=1,i.strokeStyle=colors.opacity_color,i.fillStyle=colors.opacity_color,i.fill(),i.stroke(),[[{x:l,y:s+n},{x:l,y:s},{x:l+n,y:s},],[{x:l,y:s+c-n},{x:l,y:s+c},{x:l+n,y:s+c},],[{x:l+a-n,y:s},{x:l+a,y:s},{x:l+a,y:s+n},],[{x:l+a,y:s+c-n},{x:l+a,y:s+c},{x:l+a-n,y:s+c},],].forEach(e=>{i.beginPath(),i.moveTo(e[0].x,e[0].y),i.lineTo(e[1].x,e[1].y),i.lineTo(e[2].x,e[2].y),i.strokeStyle=colors.primary_color,i.lineWidth=1,i.stroke()});var h=Math.max(.02*o,5);return n-=h,[[{x:l+h,y:s+h+n},{x:l+h,y:s+h},{x:l+h+n,y:s+h},],[{x:l+h,y:s-h+c-n},{x:l+h,y:s-h+c},{x:l+h+n,y:s-h+c},],[{x:l-h+a-n,y:s+h},{x:l-h+a,y:s+h},{x:l-h+a,y:s+h+n},],[{x:l-h+a,y:s-h+c-n},{x:l-h+a,y:s-h+c},{x:l-h+a-n,y:s-h+c},],].forEach(e=>{i.beginPath(),i.moveTo(e[0].x,e[0].y),i.lineTo(e[1].x,e[1].y),i.lineTo(e[2].x,e[2].y),i.strokeStyle=colors.secondary_color,i.lineWidth=1,i.stroke()}),i.font="100% Poppins",i.fillStyle="#ffffff",i.textAlign="left",i.textBaseline="top",i.fillText(toTitleCase(r.classLabel),r.x+10+h,r.y+10+h),i}function toTitleCase(e){return e?e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""}class Rules{static FindObjects(e,t){return t.filter(t=>t.classLabel===e)}static Biggest(e,t){return(t=Rules.FindObjects(e,t)).reduce((e,t)=>{let i=e.width*e.height,r=t.width*t.height;return r>i?t:e},t[0]||{})}static Area(e,t,i){var r=e.width*e.height/(t*i);return console.log(r),r}static Between(e,t,i){return e>=t&&e<=i}static Amount(e,t){return t.filter(t=>t.classLabel===e).length}static PosePoint(e,t){if(!t||!t.keyPoints)return!1;let i=t.keyPoints[0].points.find(t=>t.classLabel===e);return!!i}static Emotion(e,t){if(!t||!t.objects)return!1;let i=t.objects.find(e=>"face"===e.classLabel);if(!i)return!1;let r=i.classes.find(t=>t.classLabel===e);return!!r}static Gender(e,t){if(!t||!t.objects)return!1;let i=t.objects.find(e=>"face"===e.classLabel);if(!i)return!1;let r=i.classes.find(t=>t.classLabel===e);return!!r}static Position(e,t,i){if(console.log(e,i),!e||!i)return!1;switch(t){case"above":return e.y<i.y;case"below":return e.y>i.y;case"left":return e.x<i.x;case"right":return e.x>i.x;default:return console.error("Unknown direction:",t),!1}}static Check(e,t,i){var r=[];return t.forEach((t,o)=>{if(console.log(t),Array.isArray(t.condition)){var n=i[o];return(n||(n={count:0,rule_index:0,length:t.length}),t.condition[n.rule_index](e))?(n.rule_index++,console.log(n),n.rule_index==n.length&&(console.log("Fired:",t.description),r.push([!0,t.description]),n.rule_index=0,n.count++),r):(console.log("NOT fired:",t.description),r.push([!1,t.description]),r)}t.condition(e)?(console.log("Fired:",t.description),r.push([!0,t.description])):(console.log("NOT fired:",t.description),r.push([!1,t.description]))}),r}}